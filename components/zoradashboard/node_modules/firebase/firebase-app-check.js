!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).firebase)}(this,function(_e){"use strict";try{!function(){function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=e(_e),n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};var y=function(){return(y=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function b(e,a,s,c){return new(s=s||Promise)(function(r,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((c=c.apply(e,a||[])).next())})}function E(r,n){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(r,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function s(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}function a(e){try{return w.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}var w={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[],o=0;o<e.length;o+=3){var i=e[o],a=o+1<e.length,s=a?e[o+1]:0,c=o+2<e.length,u=c?e[o+2]:0,l=(15&s)<<2|u>>6,u=63&u;c||(u=64,a||(l=64)),n.push(r[i>>2],r[(3&i)<<4|s>>4],r[l],r[u])}return n.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(function(e){for(var t=[],r=0,n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t[r++]=o:(o<2048?t[r++]=o>>6|192:(55296==(64512&o)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++n)),t[r++]=o>>18|240,t[r++]=o>>12&63|128):t[r++]=o>>12|224,t[r++]=o>>6&63|128),t[r++]=63&o|128)}return t}(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],r=0,n=0;r<e.length;){var o,i,a,s=e[r++];s<128?t[n++]=String.fromCharCode(s):191<s&&s<224?(i=e[r++],t[n++]=String.fromCharCode((31&s)<<6|63&i)):239<s&&s<365?(o=((7&s)<<18|(63&(i=e[r++]))<<12|(63&(a=e[r++]))<<6|63&e[r++])-65536,t[n++]=String.fromCharCode(55296+(o>>10)),t[n++]=String.fromCharCode(56320+(1023&o))):(i=e[r++],a=e[r++],t[n++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a))}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[],o=0;o<e.length;){var i=r[e.charAt(o++)],a=o<e.length?r[e.charAt(o)]:0,s=++o<e.length?r[e.charAt(o)]:64,c=++o<e.length?r[e.charAt(o)]:64;if(++o,null==i||null==a||null==s||null==c)throw Error();n.push(i<<2|a>>4),64!==s&&(n.push(a<<4&240|s>>2),64!==c&&n.push(s<<6&192|c))}return n},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=(r.prototype.wrapCallback=function(r){var n=this;return function(e,t){e?n.reject(e):n.resolve(t),"function"==typeof r&&(n.promise.catch(function(){}),1===r.length?r(e):r(e,t))}},r);function r(){var r=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,t){r.resolve=e,r.reject=t})}function o(){return"indexedDB"in self&&null!=indexedDB}var i,u="FirebaseError",l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(h,i=Error),h);function h(e,t,r){t=i.call(this,t)||this;return t.code=e,t.customData=r,t.name=u,Object.setPrototypeOf(t,h.prototype),Error.captureStackTrace&&Error.captureStackTrace(t,f.prototype.create),t}var f=(p.prototype.create=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n,o=t[0]||{},i=this.service+"/"+e,e=this.errors[e],e=e?(n=o,e.replace(d,function(e,t){var r=n[t];return null!=r?String(r):"<"+t+"?>"})):"Error",e=this.serviceName+": "+e+" ("+i+").";return new l(i,e,o)},p);function p(e,t,r){this.service=e,this.serviceName=t,this.errors=r}var d=/\{\$([^}]+)}/g;function g(e){return JSON.parse(e)}var v,_=function(e){e=function(e){var t={},r={},n={},o="";try{var i=e.split("."),t=g(a(i[0])||""),r=g(a(i[1])||""),o=i[2],n=r.d||{};delete r.d}catch(e){}return{header:t,claims:r,data:n,signature:o}}(e).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},m=(k.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},k.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},k.prototype.setServiceProps=function(e){return this.serviceProps=e,this},k.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},k);function k(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}(R=v=v||{})[R.DEBUG=0]="DEBUG",R[R.VERBOSE=1]="VERBOSE",R[R.INFO=2]="INFO",R[R.WARN=3]="WARN",R[R.ERROR=4]="ERROR",R[R.SILENT=5]="SILENT";function A(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(!(t<e.logLevel)){var o=(new Date).toISOString(),i=S[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[i].apply(console,s(["["+o+"]  "+e.name+":"],r))}}var T={debug:v.DEBUG,verbose:v.VERBOSE,info:v.INFO,warn:v.WARN,error:v.ERROR,silent:v.SILENT},C=v.INFO,S=((I={})[v.DEBUG]="log",I[v.VERBOSE]="log",I[v.INFO]="info",I[v.WARN]="warn",I[v.ERROR]="error",I),R=(Object.defineProperty(O.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in v))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),O.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?T[e]:e},Object.defineProperty(O.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),O.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,s([this,v.DEBUG],e)),this._logHandler.apply(this,s([this,v.DEBUG],e))},O.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,s([this,v.VERBOSE],e)),this._logHandler.apply(this,s([this,v.VERBOSE],e))},O.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,s([this,v.INFO],e)),this._logHandler.apply(this,s([this,v.INFO],e))},O.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,s([this,v.WARN],e)),this._logHandler.apply(this,s([this,v.WARN],e))},O.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,s([this,v.ERROR],e)),this._logHandler.apply(this,s([this,v.ERROR],e))},O);function O(e){this.name=e,this._logLevel=C,this._logHandler=A,this._userLogHandler=null}var I=((I={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",I["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",I["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",I["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",I["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",I["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",I["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",I["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",I["recaptcha-error"]="ReCAPTCHA error.",I),x=new f("appCheck","AppCheck",I),N=new Map,P={activated:!1,tokenObservers:[]},L={enabled:!1};function M(e){return N.get(e)||P}function B(e,t){N.set(e,t)}function D(){return self.grecaptcha}function H(e){if(!M(e).activated)throw x.create("use-before-activation",{appName:e.name})}var W="https://www.google.com/recaptcha/api.js";function j(t,r){var e=M(t),n=new c;B(t,y(y({},e),{reCAPTCHAState:{initialized:n}}));var o="fire_app_check_"+t.name,i=document.createElement("div");i.id=o,i.style.display="none",document.body.appendChild(i);var a=D();return a?a.ready(function(){F(t,r,a,o),n.resolve(a)}):(e=function(){var e=D();if(!e)throw new Error("no recaptcha");e.ready(function(){F(t,r,e,o),n.resolve(e)})},(i=document.createElement("script")).src=""+W,i.onload=e,document.head.appendChild(i)),n.promise}function F(e,t,r,n){n=r.render(n,{sitekey:t,size:"invisible"}),t=M(e);B(e,y(y({},t),{reCAPTCHAState:y(y({},t.reCAPTCHAState),{widgetId:n})}))}var V="https://content-firebaseappcheck.googleapis.com/v1beta",U="exchangeRecaptchaToken",K="exchangeDebugToken",G={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4},$=(X.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},X.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},X.prototype.isRunning=function(){return!!this.pending},X.prototype.process=function(n){return b(this,void 0,void 0,function(){var r;return E(this,function(e){switch(e.label){case 0:this.stop(),e.label=1;case 1:return e.trys.push([1,6,,7]),this.pending=new c,[4,(t=this.getNextRun(n),new Promise(function(e){setTimeout(e,t)}))];case 2:return e.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return e.sent(),this.pending=new c,[4,this.operation()];case 4:return e.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return e.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return r=e.sent(),this.retryPolicy(r)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}var t})})},X.prototype.getNextRun=function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},X);function X(e,t,r,n,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=n,this.upperBound=o,this.pending=null,o<(this.nextErrorWaitInterval=n))throw new Error("Proactive refresh lower bound greater than upper bound!")}function z(e,a){var s=e.url,c=e.body;return b(this,void 0,void 0,function(){var t,r,n,o,i;return E(this,function(e){switch(e.label){case 0:r={"Content-Type":"application/json"},(t=a.getImmediate({optional:!0}))&&(r["X-Firebase-Client"]=t.getPlatformInfoString()),r={method:"POST",body:JSON.stringify(c),headers:r},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(s,r)];case 2:return i=e.sent(),[3,4];case 3:throw r=e.sent(),x.create("fetch-network-error",{originalErrorMessage:r.message});case 4:if(200!==i.status)throw x.create("fetch-status-error",{httpStatus:i.status});e.label=5;case 5:return e.trys.push([5,7,,8]),[4,i.json()];case 6:return n=e.sent(),[3,8];case 7:throw o=e.sent(),x.create("fetch-parse-error",{originalErrorMessage:o.message});case 8:if(!(i=n.ttl.match(/^([\d.]+)(s)$/))||!i[2]||isNaN(Number(i[1])))throw x.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+n.ttl});return o=1e3*Number(i[1]),i=Date.now(),[2,{token:n.attestationToken,expireTimeMillis:i+o,issuedAtTimeMillis:i}]}})})}function J(e,t){var r=e.options,n=r.projectId,e=r.appId,r=r.apiKey;return{url:V+"/projects/"+n+"/apps/"+e+":"+K+"?key="+r,body:{debug_token:t}}}var Y="firebase-app-check-database",q=1,Z="firebase-app-check-store",Q="debug-token",ee=null;function te(){return ee=ee||new Promise(function(t,r){try{var e=indexedDB.open(Y,q);e.onsuccess=function(e){t(e.target.result)},e.onerror=function(e){r(x.create("storage-open",{originalErrorMessage:null===(e=e.target.error)||void 0===e?void 0:e.message}))},e.onupgradeneeded=function(e){var t=e.target.result;0===e.oldVersion&&t.createObjectStore(Z,{keyPath:"compositeKey"})}}catch(e){r(x.create("storage-open",{originalErrorMessage:e.message}))}})}function re(r,i){return b(this,void 0,void 0,function(){var n,t,o;return E(this,function(e){switch(e.label){case 0:return[4,te()];case 1:return t=e.sent(),n=t.transaction(Z,"readwrite"),t=n.objectStore(Z),o=t.put({compositeKey:r,value:i}),[2,new Promise(function(t,r){o.onsuccess=function(e){t()},n.onerror=function(e){r(x.create("storage-set",{originalErrorMessage:null===(e=e.target.error)||void 0===e?void 0:e.message}))}})]}})})}function ne(r){return b(this,void 0,void 0,function(){var n,t,o;return E(this,function(e){switch(e.label){case 0:return[4,te()];case 1:return t=e.sent(),n=t.transaction(Z,"readonly"),t=n.objectStore(Z),o=t.get(r),[2,new Promise(function(t,r){o.onsuccess=function(e){e=e.target.result;t(e?e.value:void 0)},n.onerror=function(e){r(x.create("storage-get",{originalErrorMessage:null===(e=e.target.error)||void 0===e?void 0:e.message}))}})]}})})}function oe(e){return e.options.appId+"-"+e.name}var ie=new R("@firebase/app-check");function ae(n){return b(this,void 0,void 0,function(){var t,r;return E(this,function(e){switch(e.label){case 0:if(!o())return[3,5];t=void 0,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,ne(oe(n))];case 2:return t=e.sent(),[3,4];case 3:return r=e.sent(),ie.warn("Failed to read token from indexeddb. Error: "+r),[3,4];case 4:return[2,t];case 5:return[2,void 0]}})})}function se(e,t){return o()?re(oe(e),t).catch(function(e){ie.warn("Failed to write token to indexeddb. Error: "+e)}):Promise.resolve()}function ce(){return b(this,void 0,void 0,function(){var t;return E(this,function(e){switch(e.label){case 0:t=void 0,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,ne(Q)];case 2:return t=e.sent(),[3,4];case 3:return e.sent(),[3,4];case 4:return t?[2,t]:(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),re(Q,t).catch(function(e){return ie.warn("Failed to persist debug token to indexeddb. Error: "+e)}),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work"),[2,t])}})})}var ue={error:"UNKNOWN_ERROR"};function le(d,g,v){return void 0===v&&(v=!1),b(this,void 0,void 0,function(){var o,i,a,s,c,u,l,h,f,p;return E(this,function(e){switch(e.label){case 0:return H(d),o=M(d),i=o.token,a=void 0,i?[3,2]:[4,ae(d)];case 1:(s=e.sent())&&de(s)&&(i=s,B(d,y(y({},o),{token:i})),pe(d,{token:i.token})),e.label=2;case 2:return!v&&i&&de(i)?[2,{token:i.token}]:L.enabled?(c=z,u=J,l=[d],[4,function(){return b(this,void 0,void 0,function(){var t;return E(this,function(e){if((t=L).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")})})}()]):[3,6];case 3:return[4,c.apply(void 0,[u.apply(void 0,l.concat([e.sent()])),g])];case 4:return h=e.sent(),[4,se(d,h)];case 5:return e.sent(),B(d,y(y({},o),{token:h})),[2,{token:h.token}];case 6:return e.trys.push([6,12,,13]),o.customProvider?[4,o.customProvider.getToken()]:[3,8];case 7:return l=e.sent(),h=_(l.token),h=null!==h&&h<Date.now()&&0<h?1e3*h:Date.now(),i=y(y({},l),{issuedAtTimeMillis:h}),[3,11];case 8:return[4,function(o){return b(this,void 0,void 0,function(){var n;return E(this,function(e){switch(e.label){case 0:return H(o),[4,M(o).reCAPTCHAState.initialized.promise];case 1:return n=e.sent(),[2,new Promise(function(e,t){var r=M(o).reCAPTCHAState;n.ready(function(){e(n.execute(r.widgetId,{action:"fire_app_check"}))})})]}})})}(d).catch(function(e){throw x.create("recaptcha-error")})];case 9:return f=e.sent(),[4,z((t=d,r=(n=d.options).projectId,t=n.appId,n=n.apiKey,{url:V+"/projects/"+r+"/apps/"+t+":"+U+"?key="+n,body:{recaptcha_token:f}}),g)];case 10:i=e.sent(),e.label=11;case 11:return[3,13];case 12:return f=e.sent(),ie.error(f),a=f,[3,13];case 13:return i?[3,14]:(n=a,p={token:function(e){return w.encodeString(JSON.stringify(e),!1)}(ue),error:n},[3,16]);case 14:return p={token:i.token},B(d,y(y({},o),{token:i})),[4,se(d,i)];case 15:e.sent(),e.label=16;case 16:return pe(d,p),[2,p]}var t,r,n})})}function he(e,t,r,n,o){var i,a=M(e),r={next:n,error:o,type:r},r=y(y({},a),{tokenObservers:s(s([],a.tokenObservers),[r])});r.tokenRefresher||(t=function(r,n){var e=this;return new $(function(){return b(e,void 0,void 0,function(){var t;return E(this,function(e){switch(e.label){case 0:return M(r).token?[3,2]:[4,le(r,n)];case 1:return t=e.sent(),[3,4];case 2:return[4,le(r,n,!0)];case 3:t=e.sent(),e.label=4;case 4:if(t.error)throw t.error;return[2]}})})},function(){return!0},function(){var e=M(r);if(e.token){var t=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5,e=e.token.expireTimeMillis-3e5,t=Math.min(t,e);return Math.max(0,t-Date.now())}return 0},G.RETRIAL_MIN_WAIT,G.RETRIAL_MAX_WAIT)}(e,t),r.tokenRefresher=t),!r.tokenRefresher.isRunning()&&a.isTokenAutoRefreshEnabled&&r.tokenRefresher.start(),a.token&&de(a.token)&&(i=a.token,Promise.resolve().then(function(){return n({token:i.token})}).catch(function(){})),B(e,r)}function fe(e,t){var r=M(e),n=r.tokenObservers.filter(function(e){return e.next!==t});0===n.length&&r.tokenRefresher&&r.tokenRefresher.isRunning()&&r.tokenRefresher.stop(),B(e,y(y({},r),{tokenObservers:n}))}function pe(e,t){for(var r=0,n=M(e).tokenObservers;r<n.length;r++){var o=n[r];try{"EXTERNAL"===o.type&&null!=t.error?o.error(t.error):o.next(t)}catch(e){}}}function de(e){return 0<e.expireTimeMillis-Date.now()}function ge(s,c){return{app:s,activate:function(e,t){return function(e,t,r){var n=M(e);if(n.activated)throw x.create("already-activated",{appName:e.name});n=y(y({},n),{activated:!0}),"string"==typeof t?n.siteKey=t:n.customProvider=t,n.isTokenAutoRefreshEnabled=void 0===r?e.automaticDataCollectionEnabled:r,B(e,n),n.siteKey&&j(e,n.siteKey).catch(function(){})}(s,e,t)},setTokenAutoRefreshEnabled:function(e){return r=e,(e=M(t=s)).tokenRefresher&&(!0===r?e.tokenRefresher.start():e.tokenRefresher.stop()),void B(t,y(y({},e),{isTokenAutoRefreshEnabled:r}));var t,r},getToken:function(e){return function(r,n,o){return b(this,void 0,void 0,function(){var t;return E(this,function(e){switch(e.label){case 0:return[4,le(r,n,o)];case 1:if((t=e.sent()).error)throw t.error;return[2,{token:t.token}]}})})}(s,c,e)},onTokenChanged:function(e,t,r){return n=s,o=c,i=t,a=function(){},t=function(){},a=null!=(e=e).next?e.next.bind(e):e,null!=e.error?t=e.error.bind(e):i&&(t=i),he(n,o,"EXTERNAL",a,t),function(){return fe(n,a)};var n,o,i,a},INTERNAL:{delete:function(){for(var e=0,t=M(s).tokenObservers;e<t.length;e++){var r=t[e];fe(s,r.next)}return Promise.resolve()}}}}var ve,ye,be,Ee,we="app-check-internal";(ve=t.default).INTERNAL.registerComponent(new m("appCheck",function(e){return ge(e.getProvider("app").getImmediate(),e.getProvider("platform-logger"))},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,r){e.getProvider(we).initialize()})),ve.INTERNAL.registerComponent(new m(we,function(e){var t,r,n=e.getProvider("app").getImmediate(),e=e.getProvider("platform-logger");return t=n,r=e,{getToken:function(e){return le(t,r,e)},addTokenListener:function(e){return he(t,r,"INTERNAL",e)},removeTokenListener:function(e){return fe(t,e)}}},"PUBLIC").setInstantiationMode("EXPLICIT")),ve.registerVersion("@firebase/app-check","0.2.0"),"string"!=typeof(Ee=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}()).FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==Ee.FIREBASE_APPCHECK_DEBUG_TOKEN||((ye=L).enabled=!0,be=new c,ye.token=be,"string"==typeof Ee.FIREBASE_APPCHECK_DEBUG_TOKEN?be.resolve(Ee.FIREBASE_APPCHECK_DEBUG_TOKEN):be.resolve(ce()))}.apply(this,arguments)}catch(e){throw console.error(e),new Error("Cannot instantiate firebase-app-check.js - be sure to load firebase-app.js first.")}});
//# sourceMappingURL=firebase-app-check.js.map
