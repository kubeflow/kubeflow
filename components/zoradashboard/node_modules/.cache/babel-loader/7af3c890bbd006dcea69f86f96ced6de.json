{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar R = _interopRequireWildcard(require(\"ramda\"));\n\nvar P = _interopRequireWildcard(require(\"@react-pdf/primitives\"));\n\nvar _attributedString = _interopRequireDefault(require(\"@react-pdf/textkit/lib/attributedString\"));\n\nvar _emoji = require(\"./emoji\");\n\nvar _ignoreChars = _interopRequireDefault(require(\"./ignoreChars\"));\n\nvar _transformText = _interopRequireDefault(require(\"./transformText\"));\n\nvar PREPROCESSORS = [_ignoreChars.default, _emoji.embedEmojis];\nvar isType = R.propEq('type');\nvar isImage = isType(P.Image);\nvar isTextInstance = isType(P.TextInstance);\n/**\n * Get textkit framgents of given node object\n *\n * @param {Object} font store\n * @param {Object} instance node\n * @returns {Array} text fragments\n */\n\nvar getFragments = function getFragments(fontStore, instance, level) {\n  var _instance$props, _instance$props2;\n\n  if (level === void 0) {\n    level = 0;\n  }\n\n  if (!instance) return [{\n    string: ''\n  }];\n  var fragments = [];\n  var _instance$style = instance.style,\n      _instance$style$color = _instance$style.color,\n      color = _instance$style$color === void 0 ? 'black' : _instance$style$color,\n      _instance$style$fontF = _instance$style.fontFamily,\n      fontFamily = _instance$style$fontF === void 0 ? 'Helvetica' : _instance$style$fontF,\n      fontWeight = _instance$style.fontWeight,\n      fontStyle = _instance$style.fontStyle,\n      _instance$style$fontS = _instance$style.fontSize,\n      fontSize = _instance$style$fontS === void 0 ? 18 : _instance$style$fontS,\n      _instance$style$textA = _instance$style.textAlign,\n      textAlign = _instance$style$textA === void 0 ? 'left' : _instance$style$textA,\n      lineHeight = _instance$style.lineHeight,\n      textDecoration = _instance$style.textDecoration,\n      textDecorationColor = _instance$style.textDecorationColor,\n      textDecorationStyle = _instance$style.textDecorationStyle,\n      textTransform = _instance$style.textTransform,\n      letterSpacing = _instance$style.letterSpacing,\n      textIndent = _instance$style.textIndent,\n      opacity = _instance$style.opacity;\n  var opts = {\n    fontFamily: fontFamily,\n    fontWeight: fontWeight,\n    fontStyle: fontStyle\n  };\n  var obj = fontStore ? fontStore.getFont(opts) : null;\n  var font = obj ? obj.data : fontFamily; // Don't pass main background color to textkit. Will be rendered by the render packace instead\n\n  var backgroundColor = level === 0 ? null : instance.style.backgroundColor;\n  var attributes = {\n    font: font,\n    color: color,\n    opacity: opacity,\n    fontSize: fontSize,\n    backgroundColor: backgroundColor,\n    align: textAlign,\n    indent: textIndent,\n    characterSpacing: letterSpacing,\n    strikeStyle: textDecorationStyle,\n    underlineStyle: textDecorationStyle,\n    underline: textDecoration === 'underline' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    strike: textDecoration === 'line-through' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    strikeColor: textDecorationColor || color,\n    underlineColor: textDecorationColor || color,\n    link: ((_instance$props = instance.props) === null || _instance$props === void 0 ? void 0 : _instance$props.src) || ((_instance$props2 = instance.props) === null || _instance$props2 === void 0 ? void 0 : _instance$props2.href),\n    lineHeight: lineHeight ? lineHeight * fontSize : null\n  };\n\n  for (var i = 0; i < instance.children.length; i += 1) {\n    var child = instance.children[i];\n\n    if (isImage(child)) {\n      fragments.push({\n        string: String.fromCharCode(0xfffc),\n        attributes: (0, _extends2.default)({}, attributes, {\n          attachment: {\n            width: child.style.width || fontSize,\n            height: child.style.height || fontSize,\n            image: child.image.data\n          }\n        })\n      });\n    } else if (isTextInstance(child)) {\n      fragments.push({\n        string: (0, _transformText.default)(child.value, textTransform),\n        attributes: attributes\n      });\n    } else if (child) {\n      var _fragments;\n\n      (_fragments = fragments).push.apply(_fragments, getFragments(fontStore, child, level + 1));\n    }\n  }\n\n  for (var _i = 0; _i < PREPROCESSORS.length; _i += 1) {\n    var preprocessor = PREPROCESSORS[_i];\n    fragments = preprocessor(fragments);\n  }\n\n  return fragments;\n};\n/**\n * Get textkit attributed string from text node\n *\n * @param {Object} font store\n * @param {Object} instance node\n * @returns {Object} attributed string\n */\n\n\nvar getAttributedString = function getAttributedString(fontStore, instance) {\n  var fragments = getFragments(fontStore, instance);\n  return _attributedString.default.fromFragments(fragments);\n};\n\nvar _default = R.curryN(2, getAttributedString);\n\nexports.default = _default;","map":{"version":3,"sources":["/Users/allan.chepkoy/cloud/kubeflow/components/zoradashboard/node_modules/@react-pdf/layout/lib/text/getAttributedString.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","exports","__esModule","default","_extends2","R","P","_attributedString","_emoji","_ignoreChars","_transformText","PREPROCESSORS","embedEmojis","isType","propEq","isImage","Image","isTextInstance","TextInstance","getFragments","fontStore","instance","level","_instance$props","_instance$props2","string","fragments","_instance$style","style","_instance$style$color","color","_instance$style$fontF","fontFamily","fontWeight","fontStyle","_instance$style$fontS","fontSize","_instance$style$textA","textAlign","lineHeight","textDecoration","textDecorationColor","textDecorationStyle","textTransform","letterSpacing","textIndent","opacity","opts","obj","getFont","font","data","backgroundColor","attributes","align","indent","characterSpacing","strikeStyle","underlineStyle","underline","strike","strikeColor","underlineColor","link","props","src","href","i","children","length","child","push","String","fromCharCode","attachment","width","height","image","value","_fragments","apply","_i","preprocessor","getAttributedString","fromFragments","_default","curryN"],"mappings":"AAAA;;AAEA,IAAIA,uBAAuB,GAAGC,OAAO,CAAC,+CAAD,CAArC;;AAEA,IAAIC,sBAAsB,GAAGD,OAAO,CAAC,8CAAD,CAApC;;AAEAE,OAAO,CAACC,UAAR,GAAqB,IAArB;AACAD,OAAO,CAACE,OAAR,GAAkB,KAAK,CAAvB;;AAEA,IAAIC,SAAS,GAAGJ,sBAAsB,CAACD,OAAO,CAAC,gCAAD,CAAR,CAAtC;;AAEA,IAAIM,CAAC,GAAGP,uBAAuB,CAACC,OAAO,CAAC,OAAD,CAAR,CAA/B;;AAEA,IAAIO,CAAC,GAAGR,uBAAuB,CAACC,OAAO,CAAC,uBAAD,CAAR,CAA/B;;AAEA,IAAIQ,iBAAiB,GAAGP,sBAAsB,CAACD,OAAO,CAAC,yCAAD,CAAR,CAA9C;;AAEA,IAAIS,MAAM,GAAGT,OAAO,CAAC,SAAD,CAApB;;AAEA,IAAIU,YAAY,GAAGT,sBAAsB,CAACD,OAAO,CAAC,eAAD,CAAR,CAAzC;;AAEA,IAAIW,cAAc,GAAGV,sBAAsB,CAACD,OAAO,CAAC,iBAAD,CAAR,CAA3C;;AAEA,IAAIY,aAAa,GAAG,CAACF,YAAY,CAACN,OAAd,EAAuBK,MAAM,CAACI,WAA9B,CAApB;AACA,IAAIC,MAAM,GAAGR,CAAC,CAACS,MAAF,CAAS,MAAT,CAAb;AACA,IAAIC,OAAO,GAAGF,MAAM,CAACP,CAAC,CAACU,KAAH,CAApB;AACA,IAAIC,cAAc,GAAGJ,MAAM,CAACP,CAAC,CAACY,YAAH,CAA3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,YAAY,GAAG,SAASA,YAAT,CAAsBC,SAAtB,EAAiCC,QAAjC,EAA2CC,KAA3C,EAAkD;AACnE,MAAIC,eAAJ,EAAqBC,gBAArB;;AAEA,MAAIF,KAAK,KAAK,KAAK,CAAnB,EAAsB;AACpBA,IAAAA,KAAK,GAAG,CAAR;AACD;;AAED,MAAI,CAACD,QAAL,EAAe,OAAO,CAAC;AACrBI,IAAAA,MAAM,EAAE;AADa,GAAD,CAAP;AAGf,MAAIC,SAAS,GAAG,EAAhB;AACA,MAAIC,eAAe,GAAGN,QAAQ,CAACO,KAA/B;AAAA,MACIC,qBAAqB,GAAGF,eAAe,CAACG,KAD5C;AAAA,MAEIA,KAAK,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,OAAnC,GAA6CA,qBAFzD;AAAA,MAGIE,qBAAqB,GAAGJ,eAAe,CAACK,UAH5C;AAAA,MAIIA,UAAU,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,WAAnC,GAAiDA,qBAJlE;AAAA,MAKIE,UAAU,GAAGN,eAAe,CAACM,UALjC;AAAA,MAMIC,SAAS,GAAGP,eAAe,CAACO,SANhC;AAAA,MAOIC,qBAAqB,GAAGR,eAAe,CAACS,QAP5C;AAAA,MAQIA,QAAQ,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,EAAnC,GAAwCA,qBARvD;AAAA,MASIE,qBAAqB,GAAGV,eAAe,CAACW,SAT5C;AAAA,MAUIA,SAAS,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,MAAnC,GAA4CA,qBAV5D;AAAA,MAWIE,UAAU,GAAGZ,eAAe,CAACY,UAXjC;AAAA,MAYIC,cAAc,GAAGb,eAAe,CAACa,cAZrC;AAAA,MAaIC,mBAAmB,GAAGd,eAAe,CAACc,mBAb1C;AAAA,MAcIC,mBAAmB,GAAGf,eAAe,CAACe,mBAd1C;AAAA,MAeIC,aAAa,GAAGhB,eAAe,CAACgB,aAfpC;AAAA,MAgBIC,aAAa,GAAGjB,eAAe,CAACiB,aAhBpC;AAAA,MAiBIC,UAAU,GAAGlB,eAAe,CAACkB,UAjBjC;AAAA,MAkBIC,OAAO,GAAGnB,eAAe,CAACmB,OAlB9B;AAmBA,MAAIC,IAAI,GAAG;AACTf,IAAAA,UAAU,EAAEA,UADH;AAETC,IAAAA,UAAU,EAAEA,UAFH;AAGTC,IAAAA,SAAS,EAAEA;AAHF,GAAX;AAKA,MAAIc,GAAG,GAAG5B,SAAS,GAAGA,SAAS,CAAC6B,OAAV,CAAkBF,IAAlB,CAAH,GAA6B,IAAhD;AACA,MAAIG,IAAI,GAAGF,GAAG,GAAGA,GAAG,CAACG,IAAP,GAAcnB,UAA5B,CApCmE,CAoC3B;;AAExC,MAAIoB,eAAe,GAAG9B,KAAK,KAAK,CAAV,GAAc,IAAd,GAAqBD,QAAQ,CAACO,KAAT,CAAewB,eAA1D;AACA,MAAIC,UAAU,GAAG;AACfH,IAAAA,IAAI,EAAEA,IADS;AAEfpB,IAAAA,KAAK,EAAEA,KAFQ;AAGfgB,IAAAA,OAAO,EAAEA,OAHM;AAIfV,IAAAA,QAAQ,EAAEA,QAJK;AAKfgB,IAAAA,eAAe,EAAEA,eALF;AAMfE,IAAAA,KAAK,EAAEhB,SANQ;AAOfiB,IAAAA,MAAM,EAAEV,UAPO;AAQfW,IAAAA,gBAAgB,EAAEZ,aARH;AASfa,IAAAA,WAAW,EAAEf,mBATE;AAUfgB,IAAAA,cAAc,EAAEhB,mBAVD;AAWfiB,IAAAA,SAAS,EAAEnB,cAAc,KAAK,WAAnB,IAAkCA,cAAc,KAAK,wBAArD,IAAiFA,cAAc,KAAK,wBAXhG;AAYfoB,IAAAA,MAAM,EAAEpB,cAAc,KAAK,cAAnB,IAAqCA,cAAc,KAAK,wBAAxD,IAAoFA,cAAc,KAAK,wBAZhG;AAafqB,IAAAA,WAAW,EAAEpB,mBAAmB,IAAIX,KAbrB;AAcfgC,IAAAA,cAAc,EAAErB,mBAAmB,IAAIX,KAdxB;AAefiC,IAAAA,IAAI,EAAE,CAAC,CAACxC,eAAe,GAAGF,QAAQ,CAAC2C,KAA5B,MAAuC,IAAvC,IAA+CzC,eAAe,KAAK,KAAK,CAAxE,GAA4E,KAAK,CAAjF,GAAqFA,eAAe,CAAC0C,GAAtG,MAA+G,CAACzC,gBAAgB,GAAGH,QAAQ,CAAC2C,KAA7B,MAAwC,IAAxC,IAAgDxC,gBAAgB,KAAK,KAAK,CAA1E,GAA8E,KAAK,CAAnF,GAAuFA,gBAAgB,CAAC0C,IAAvN,CAfS;AAgBf3B,IAAAA,UAAU,EAAEA,UAAU,GAAGA,UAAU,GAAGH,QAAhB,GAA2B;AAhBlC,GAAjB;;AAmBA,OAAK,IAAI+B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG9C,QAAQ,CAAC+C,QAAT,CAAkBC,MAAtC,EAA8CF,CAAC,IAAI,CAAnD,EAAsD;AACpD,QAAIG,KAAK,GAAGjD,QAAQ,CAAC+C,QAAT,CAAkBD,CAAlB,CAAZ;;AAEA,QAAIpD,OAAO,CAACuD,KAAD,CAAX,EAAoB;AAClB5C,MAAAA,SAAS,CAAC6C,IAAV,CAAe;AACb9C,QAAAA,MAAM,EAAE+C,MAAM,CAACC,YAAP,CAAoB,MAApB,CADK;AAEbpB,QAAAA,UAAU,EAAE,CAAC,GAAGjD,SAAS,CAACD,OAAd,EAAuB,EAAvB,EAA2BkD,UAA3B,EAAuC;AACjDqB,UAAAA,UAAU,EAAE;AACVC,YAAAA,KAAK,EAAEL,KAAK,CAAC1C,KAAN,CAAY+C,KAAZ,IAAqBvC,QADlB;AAEVwC,YAAAA,MAAM,EAAEN,KAAK,CAAC1C,KAAN,CAAYgD,MAAZ,IAAsBxC,QAFpB;AAGVyC,YAAAA,KAAK,EAAEP,KAAK,CAACO,KAAN,CAAY1B;AAHT;AADqC,SAAvC;AAFC,OAAf;AAUD,KAXD,MAWO,IAAIlC,cAAc,CAACqD,KAAD,CAAlB,EAA2B;AAChC5C,MAAAA,SAAS,CAAC6C,IAAV,CAAe;AACb9C,QAAAA,MAAM,EAAE,CAAC,GAAGf,cAAc,CAACP,OAAnB,EAA4BmE,KAAK,CAACQ,KAAlC,EAAyCnC,aAAzC,CADK;AAEbU,QAAAA,UAAU,EAAEA;AAFC,OAAf;AAID,KALM,MAKA,IAAIiB,KAAJ,EAAW;AAChB,UAAIS,UAAJ;;AAEA,OAACA,UAAU,GAAGrD,SAAd,EAAyB6C,IAAzB,CAA8BS,KAA9B,CAAoCD,UAApC,EAAgD5D,YAAY,CAACC,SAAD,EAAYkD,KAAZ,EAAmBhD,KAAK,GAAG,CAA3B,CAA5D;AACD;AACF;;AAED,OAAK,IAAI2D,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGtE,aAAa,CAAC0D,MAApC,EAA4CY,EAAE,IAAI,CAAlD,EAAqD;AACnD,QAAIC,YAAY,GAAGvE,aAAa,CAACsE,EAAD,CAAhC;AACAvD,IAAAA,SAAS,GAAGwD,YAAY,CAACxD,SAAD,CAAxB;AACD;;AAED,SAAOA,SAAP;AACD,CA1FD;AA2FA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIyD,mBAAmB,GAAG,SAASA,mBAAT,CAA6B/D,SAA7B,EAAwCC,QAAxC,EAAkD;AAC1E,MAAIK,SAAS,GAAGP,YAAY,CAACC,SAAD,EAAYC,QAAZ,CAA5B;AACA,SAAOd,iBAAiB,CAACJ,OAAlB,CAA0BiF,aAA1B,CAAwC1D,SAAxC,CAAP;AACD,CAHD;;AAKA,IAAI2D,QAAQ,GAAGhF,CAAC,CAACiF,MAAF,CAAS,CAAT,EAAYH,mBAAZ,CAAf;;AAEAlF,OAAO,CAACE,OAAR,GAAkBkF,QAAlB","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar R = _interopRequireWildcard(require(\"ramda\"));\n\nvar P = _interopRequireWildcard(require(\"@react-pdf/primitives\"));\n\nvar _attributedString = _interopRequireDefault(require(\"@react-pdf/textkit/lib/attributedString\"));\n\nvar _emoji = require(\"./emoji\");\n\nvar _ignoreChars = _interopRequireDefault(require(\"./ignoreChars\"));\n\nvar _transformText = _interopRequireDefault(require(\"./transformText\"));\n\nvar PREPROCESSORS = [_ignoreChars.default, _emoji.embedEmojis];\nvar isType = R.propEq('type');\nvar isImage = isType(P.Image);\nvar isTextInstance = isType(P.TextInstance);\n/**\n * Get textkit framgents of given node object\n *\n * @param {Object} font store\n * @param {Object} instance node\n * @returns {Array} text fragments\n */\n\nvar getFragments = function getFragments(fontStore, instance, level) {\n  var _instance$props, _instance$props2;\n\n  if (level === void 0) {\n    level = 0;\n  }\n\n  if (!instance) return [{\n    string: ''\n  }];\n  var fragments = [];\n  var _instance$style = instance.style,\n      _instance$style$color = _instance$style.color,\n      color = _instance$style$color === void 0 ? 'black' : _instance$style$color,\n      _instance$style$fontF = _instance$style.fontFamily,\n      fontFamily = _instance$style$fontF === void 0 ? 'Helvetica' : _instance$style$fontF,\n      fontWeight = _instance$style.fontWeight,\n      fontStyle = _instance$style.fontStyle,\n      _instance$style$fontS = _instance$style.fontSize,\n      fontSize = _instance$style$fontS === void 0 ? 18 : _instance$style$fontS,\n      _instance$style$textA = _instance$style.textAlign,\n      textAlign = _instance$style$textA === void 0 ? 'left' : _instance$style$textA,\n      lineHeight = _instance$style.lineHeight,\n      textDecoration = _instance$style.textDecoration,\n      textDecorationColor = _instance$style.textDecorationColor,\n      textDecorationStyle = _instance$style.textDecorationStyle,\n      textTransform = _instance$style.textTransform,\n      letterSpacing = _instance$style.letterSpacing,\n      textIndent = _instance$style.textIndent,\n      opacity = _instance$style.opacity;\n  var opts = {\n    fontFamily: fontFamily,\n    fontWeight: fontWeight,\n    fontStyle: fontStyle\n  };\n  var obj = fontStore ? fontStore.getFont(opts) : null;\n  var font = obj ? obj.data : fontFamily; // Don't pass main background color to textkit. Will be rendered by the render packace instead\n\n  var backgroundColor = level === 0 ? null : instance.style.backgroundColor;\n  var attributes = {\n    font: font,\n    color: color,\n    opacity: opacity,\n    fontSize: fontSize,\n    backgroundColor: backgroundColor,\n    align: textAlign,\n    indent: textIndent,\n    characterSpacing: letterSpacing,\n    strikeStyle: textDecorationStyle,\n    underlineStyle: textDecorationStyle,\n    underline: textDecoration === 'underline' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    strike: textDecoration === 'line-through' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    strikeColor: textDecorationColor || color,\n    underlineColor: textDecorationColor || color,\n    link: ((_instance$props = instance.props) === null || _instance$props === void 0 ? void 0 : _instance$props.src) || ((_instance$props2 = instance.props) === null || _instance$props2 === void 0 ? void 0 : _instance$props2.href),\n    lineHeight: lineHeight ? lineHeight * fontSize : null\n  };\n\n  for (var i = 0; i < instance.children.length; i += 1) {\n    var child = instance.children[i];\n\n    if (isImage(child)) {\n      fragments.push({\n        string: String.fromCharCode(0xfffc),\n        attributes: (0, _extends2.default)({}, attributes, {\n          attachment: {\n            width: child.style.width || fontSize,\n            height: child.style.height || fontSize,\n            image: child.image.data\n          }\n        })\n      });\n    } else if (isTextInstance(child)) {\n      fragments.push({\n        string: (0, _transformText.default)(child.value, textTransform),\n        attributes: attributes\n      });\n    } else if (child) {\n      var _fragments;\n\n      (_fragments = fragments).push.apply(_fragments, getFragments(fontStore, child, level + 1));\n    }\n  }\n\n  for (var _i = 0; _i < PREPROCESSORS.length; _i += 1) {\n    var preprocessor = PREPROCESSORS[_i];\n    fragments = preprocessor(fragments);\n  }\n\n  return fragments;\n};\n/**\n * Get textkit attributed string from text node\n *\n * @param {Object} font store\n * @param {Object} instance node\n * @returns {Object} attributed string\n */\n\n\nvar getAttributedString = function getAttributedString(fontStore, instance) {\n  var fragments = getFragments(fontStore, instance);\n  return _attributedString.default.fromFragments(fragments);\n};\n\nvar _default = R.curryN(2, getAttributedString);\n\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}