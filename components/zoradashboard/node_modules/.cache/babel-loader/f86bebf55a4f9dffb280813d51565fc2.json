{"ast":null,"code":"var WritableStream = require('stream').Writable;\n\nvar util = require('util');\n\nvar Blob = require('blob');\n\nvar URL = global.URL || global.webkitURL || global.mozURL;\n\nfunction BlobStream() {\n  if (!(this instanceof BlobStream)) return new BlobStream();\n  WritableStream.call(this);\n  this._chunks = [];\n  this._blob = null;\n  this.length = 0;\n}\n\nutil.inherits(BlobStream, WritableStream);\n\nBlobStream.prototype._write = function (chunk, encoding, callback) {\n  // convert chunks to Uint8Arrays (e.g. Buffer when array fallback is being used)\n  if (!(chunk instanceof Uint8Array)) chunk = new Uint8Array(chunk);\n  this.length += chunk.length;\n\n  this._chunks.push(chunk);\n\n  callback();\n};\n\nBlobStream.prototype.toBlob = function (type) {\n  type = type || 'application/octet-stream'; // cache the blob if needed\n\n  if (!this._blob) {\n    this._blob = new Blob(this._chunks, {\n      type: type\n    });\n    this._chunks = []; // free memory\n  } // if the cached blob's type doesn't match the requested type, make a new blob\n\n\n  if (this._blob.type !== type) this._blob = new Blob([this._blob], {\n    type: type\n  });\n  return this._blob;\n};\n\nBlobStream.prototype.toBlobURL = function (type) {\n  return URL.createObjectURL(this.toBlob(type));\n};\n\nmodule.exports = BlobStream;","map":{"version":3,"sources":["/Users/allan.chepkoy/cloud/kubeflow/components/zoradashboard/node_modules/blob-stream/index.js"],"names":["WritableStream","require","Writable","util","Blob","URL","global","webkitURL","mozURL","BlobStream","call","_chunks","_blob","length","inherits","prototype","_write","chunk","encoding","callback","Uint8Array","push","toBlob","type","toBlobURL","createObjectURL","module","exports"],"mappings":"AAAA,IAAIA,cAAc,GAAGC,OAAO,CAAC,QAAD,CAAP,CAAkBC,QAAvC;;AACA,IAAIC,IAAI,GAAGF,OAAO,CAAC,MAAD,CAAlB;;AACA,IAAIG,IAAI,GAAGH,OAAO,CAAC,MAAD,CAAlB;;AACA,IAAII,GAAG,GAAGC,MAAM,CAACD,GAAP,IAAcC,MAAM,CAACC,SAArB,IAAkCD,MAAM,CAACE,MAAnD;;AAEA,SAASC,UAAT,GAAsB;AACpB,MAAI,EAAE,gBAAgBA,UAAlB,CAAJ,EACE,OAAO,IAAIA,UAAJ,EAAP;AAEFT,EAAAA,cAAc,CAACU,IAAf,CAAoB,IAApB;AACA,OAAKC,OAAL,GAAe,EAAf;AACA,OAAKC,KAAL,GAAa,IAAb;AACA,OAAKC,MAAL,GAAc,CAAd;AACD;;AAEDV,IAAI,CAACW,QAAL,CAAcL,UAAd,EAA0BT,cAA1B;;AAEAS,UAAU,CAACM,SAAX,CAAqBC,MAArB,GAA8B,UAASC,KAAT,EAAgBC,QAAhB,EAA0BC,QAA1B,EAAoC;AAChE;AACA,MAAI,EAAEF,KAAK,YAAYG,UAAnB,CAAJ,EACEH,KAAK,GAAG,IAAIG,UAAJ,CAAeH,KAAf,CAAR;AAEF,OAAKJ,MAAL,IAAeI,KAAK,CAACJ,MAArB;;AACA,OAAKF,OAAL,CAAaU,IAAb,CAAkBJ,KAAlB;;AACAE,EAAAA,QAAQ;AACT,CARD;;AAUAV,UAAU,CAACM,SAAX,CAAqBO,MAArB,GAA8B,UAASC,IAAT,EAAe;AAC3CA,EAAAA,IAAI,GAAGA,IAAI,IAAI,0BAAf,CAD2C,CAG3C;;AACA,MAAI,CAAC,KAAKX,KAAV,EAAiB;AACf,SAAKA,KAAL,GAAa,IAAIR,IAAJ,CAAS,KAAKO,OAAd,EAAuB;AAClCY,MAAAA,IAAI,EAAEA;AAD4B,KAAvB,CAAb;AAIA,SAAKZ,OAAL,GAAe,EAAf,CALe,CAKI;AACpB,GAV0C,CAY3C;;;AACA,MAAI,KAAKC,KAAL,CAAWW,IAAX,KAAoBA,IAAxB,EACE,KAAKX,KAAL,GAAa,IAAIR,IAAJ,CAAS,CAAC,KAAKQ,KAAN,CAAT,EAAuB;AAAEW,IAAAA,IAAI,EAAEA;AAAR,GAAvB,CAAb;AAEF,SAAO,KAAKX,KAAZ;AACD,CAjBD;;AAmBAH,UAAU,CAACM,SAAX,CAAqBS,SAArB,GAAiC,UAASD,IAAT,EAAe;AAC9C,SAAOlB,GAAG,CAACoB,eAAJ,CAAoB,KAAKH,MAAL,CAAYC,IAAZ,CAApB,CAAP;AACD,CAFD;;AAIAG,MAAM,CAACC,OAAP,GAAiBlB,UAAjB","sourcesContent":["var WritableStream = require('stream').Writable;\nvar util = require('util');\nvar Blob = require('blob');\nvar URL = global.URL || global.webkitURL || global.mozURL;\n\nfunction BlobStream() {\n  if (!(this instanceof BlobStream))\n    return new BlobStream;\n    \n  WritableStream.call(this);\n  this._chunks = [];\n  this._blob = null;\n  this.length = 0;\n}\n\nutil.inherits(BlobStream, WritableStream);\n\nBlobStream.prototype._write = function(chunk, encoding, callback) {\n  // convert chunks to Uint8Arrays (e.g. Buffer when array fallback is being used)\n  if (!(chunk instanceof Uint8Array))\n    chunk = new Uint8Array(chunk);\n    \n  this.length += chunk.length;\n  this._chunks.push(chunk);\n  callback();\n};\n\nBlobStream.prototype.toBlob = function(type) {\n  type = type || 'application/octet-stream';\n  \n  // cache the blob if needed\n  if (!this._blob) {\n    this._blob = new Blob(this._chunks, {\n      type: type\n    });\n    \n    this._chunks = []; // free memory\n  }\n  \n  // if the cached blob's type doesn't match the requested type, make a new blob\n  if (this._blob.type !== type)\n    this._blob = new Blob([this._blob], { type: type });\n  \n  return this._blob;\n};\n\nBlobStream.prototype.toBlobURL = function(type) {\n  return URL.createObjectURL(this.toBlob(type));\n};\n\nmodule.exports = BlobStream;\n"]},"metadata":{},"sourceType":"script"}