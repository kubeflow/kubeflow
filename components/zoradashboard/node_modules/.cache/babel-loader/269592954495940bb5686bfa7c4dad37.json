{"ast":null,"code":"import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\n\nvar isWatching = function () {\n  return !!watching;\n};\n\nvar CATCH_PERIOD = 250;\nvar observerConfig = {\n  attributes: true,\n  characterData: true,\n  childList: true,\n  subtree: true\n};\nvar events = ['resize', 'load', 'transitionend', 'animationend', 'animationstart', 'animationiteration', 'keyup', 'keydown', 'mouseup', 'mousedown', 'mouseover', 'mouseout', 'blur', 'focus'];\n\nvar time = function (timeout) {\n  if (timeout === void 0) {\n    timeout = 0;\n  }\n\n  return Date.now() + timeout;\n};\n\nvar scheduled = false;\n\nvar Scheduler = function () {\n  function Scheduler() {\n    var _this = this;\n\n    this.stopped = true;\n\n    this.listener = function () {\n      return _this.schedule();\n    };\n  }\n\n  Scheduler.prototype.run = function (timeout) {\n    var _this = this;\n\n    if (timeout === void 0) {\n      timeout = CATCH_PERIOD;\n    }\n\n    if (scheduled) {\n      return;\n    }\n\n    scheduled = true;\n    var until = time(timeout);\n    queueResizeObserver(function () {\n      var elementsHaveResized = false;\n\n      try {\n        elementsHaveResized = process();\n      } finally {\n        scheduled = false;\n        timeout = until - time();\n\n        if (!isWatching()) {\n          return;\n        }\n\n        if (elementsHaveResized) {\n          _this.run(1000);\n        } else if (timeout > 0) {\n          _this.run(timeout);\n        } else {\n          _this.start();\n        }\n      }\n    });\n  };\n\n  Scheduler.prototype.schedule = function () {\n    this.stop();\n    this.run();\n  };\n\n  Scheduler.prototype.observe = function () {\n    var _this = this;\n\n    var cb = function () {\n      return _this.observer && _this.observer.observe(document.body, observerConfig);\n    };\n\n    document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n  };\n\n  Scheduler.prototype.start = function () {\n    var _this = this;\n\n    if (this.stopped) {\n      this.stopped = false;\n      this.observer = new MutationObserver(this.listener);\n      this.observe();\n      events.forEach(function (name) {\n        return global.addEventListener(name, _this.listener, true);\n      });\n    }\n  };\n\n  Scheduler.prototype.stop = function () {\n    var _this = this;\n\n    if (!this.stopped) {\n      this.observer && this.observer.disconnect();\n      events.forEach(function (name) {\n        return global.removeEventListener(name, _this.listener, true);\n      });\n      this.stopped = true;\n    }\n  };\n\n  return Scheduler;\n}();\n\nvar scheduler = new Scheduler();\n\nvar updateCount = function (n) {\n  !watching && n > 0 && scheduler.start();\n  watching += n;\n  !watching && scheduler.stop();\n};\n\nexport { scheduler, updateCount };","map":{"version":3,"sources":["/Users/allan.chepkoy/cloud/kubeflow/components/zoradashboard/node_modules/@juggle/resize-observer/lib/utils/scheduler.js"],"names":["process","global","queueResizeObserver","watching","isWatching","CATCH_PERIOD","observerConfig","attributes","characterData","childList","subtree","events","time","timeout","Date","now","scheduled","Scheduler","_this","stopped","listener","schedule","prototype","run","until","elementsHaveResized","start","stop","observe","cb","observer","document","body","addEventListener","MutationObserver","forEach","name","disconnect","removeEventListener","scheduler","updateCount","n"],"mappings":"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","sourcesContent":["import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\nvar isWatching = function () { return !!watching; };\nvar CATCH_PERIOD = 250;\nvar observerConfig = { attributes: true, characterData: true, childList: true, subtree: true };\nvar events = [\n    'resize',\n    'load',\n    'transitionend',\n    'animationend',\n    'animationstart',\n    'animationiteration',\n    'keyup',\n    'keydown',\n    'mouseup',\n    'mousedown',\n    'mouseover',\n    'mouseout',\n    'blur',\n    'focus'\n];\nvar time = function (timeout) {\n    if (timeout === void 0) { timeout = 0; }\n    return Date.now() + timeout;\n};\nvar scheduled = false;\nvar Scheduler = (function () {\n    function Scheduler() {\n        var _this = this;\n        this.stopped = true;\n        this.listener = function () { return _this.schedule(); };\n    }\n    Scheduler.prototype.run = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = CATCH_PERIOD; }\n        if (scheduled) {\n            return;\n        }\n        scheduled = true;\n        var until = time(timeout);\n        queueResizeObserver(function () {\n            var elementsHaveResized = false;\n            try {\n                elementsHaveResized = process();\n            }\n            finally {\n                scheduled = false;\n                timeout = until - time();\n                if (!isWatching()) {\n                    return;\n                }\n                if (elementsHaveResized) {\n                    _this.run(1000);\n                }\n                else if (timeout > 0) {\n                    _this.run(timeout);\n                }\n                else {\n                    _this.start();\n                }\n            }\n        });\n    };\n    Scheduler.prototype.schedule = function () {\n        this.stop();\n        this.run();\n    };\n    Scheduler.prototype.observe = function () {\n        var _this = this;\n        var cb = function () { return _this.observer && _this.observer.observe(document.body, observerConfig); };\n        document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n    };\n    Scheduler.prototype.start = function () {\n        var _this = this;\n        if (this.stopped) {\n            this.stopped = false;\n            this.observer = new MutationObserver(this.listener);\n            this.observe();\n            events.forEach(function (name) { return global.addEventListener(name, _this.listener, true); });\n        }\n    };\n    Scheduler.prototype.stop = function () {\n        var _this = this;\n        if (!this.stopped) {\n            this.observer && this.observer.disconnect();\n            events.forEach(function (name) { return global.removeEventListener(name, _this.listener, true); });\n            this.stopped = true;\n        }\n    };\n    return Scheduler;\n}());\nvar scheduler = new Scheduler();\nvar updateCount = function (n) {\n    !watching && n > 0 && scheduler.start();\n    watching += n;\n    !watching && scheduler.stop();\n};\nexport { scheduler, updateCount };\n"]},"metadata":{},"sourceType":"module"}